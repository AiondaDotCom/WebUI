<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RichTextField Demo - Aionda WebUI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../dist/aionda-webui.css">
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <h1 class="text-xl font-bold text-gray-900">üìù RichTextField Demo</h1>
                    <span class="text-sm text-gray-500">Rich Text Editor Component</span>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="../" class="text-blue-600 hover:text-blue-800 text-sm">‚Üê Back to Examples</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto p-6">
        <!-- Demo Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Basic RichTextField -->
            <div class="bg-white rounded-lg shadow-lg border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">üìù Basic Rich Text Editor</h3>
                <div id="basic-richtext"></div>
                
                <div class="mt-4 space-y-2">
                    <button id="get-content" class="bg-blue-500 text-white px-4 py-2 rounded text-sm hover:bg-blue-600">
                        Get Content
                    </button>
                    <button id="set-content" class="bg-green-500 text-white px-4 py-2 rounded text-sm hover:bg-green-600">
                        Set Sample Content
                    </button>
                    <button id="clear-content" class="bg-red-500 text-white px-4 py-2 rounded text-sm hover:bg-red-600">
                        Clear
                    </button>
                </div>
                
                <div class="mt-4 p-3 bg-gray-50 rounded text-sm">
                    <strong>Features:</strong> Full formatting toolbar, HTML output, validation
                </div>
            </div>

            <!-- Form Integration -->
            <div class="bg-white rounded-lg shadow-lg border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">üìã Form Integration</h3>
                <div id="form-richtext"></div>
                
                <div class="mt-4 space-y-2">
                    <button id="validate-form" class="bg-purple-500 text-white px-4 py-2 rounded text-sm hover:bg-purple-600">
                        Validate Form
                    </button>
                    <button id="submit-form" class="bg-green-500 text-white px-4 py-2 rounded text-sm hover:bg-green-600">
                        Submit Form
                    </button>
                </div>
                
                <div class="mt-4 p-3 bg-gray-50 rounded text-sm">
                    <strong>Features:</strong> Required validation, form integration, character limits
                </div>
            </div>

            <!-- Custom Toolbar -->
            <div class="bg-white rounded-lg shadow-lg border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">üõ†Ô∏è Custom Toolbar</h3>
                <div id="custom-richtext"></div>
                
                <div class="mt-4 space-y-2">
                    <button id="insert-html" class="bg-indigo-500 text-white px-4 py-2 rounded text-sm hover:bg-indigo-600">
                        Insert Custom HTML
                    </button>
                    <button id="word-count" class="bg-yellow-500 text-white px-4 py-2 rounded text-sm hover:bg-yellow-600">
                        Show Word Count
                    </button>
                </div>
                
                <div class="mt-4 p-3 bg-gray-50 rounded text-sm">
                    <strong>Features:</strong> Custom toolbar buttons, HTML insertion, word counting
                </div>
            </div>

            <!-- Compact Editor -->
            <div class="bg-white rounded-lg shadow-lg border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">üì± Compact Editor</h3>
                <div id="compact-richtext"></div>
                
                <div class="mt-4 space-y-2">
                    <button id="toggle-disabled" class="bg-gray-500 text-white px-4 py-2 rounded text-sm hover:bg-gray-600">
                        Toggle Disabled
                    </button>
                    <button id="focus-editor" class="bg-blue-500 text-white px-4 py-2 rounded text-sm hover:bg-blue-600">
                        Focus Editor
                    </button>
                </div>
                
                <div class="mt-4 p-3 bg-gray-50 rounded text-sm">
                    <strong>Features:</strong> Minimal toolbar, compact size, disabled state
                </div>
            </div>
        </div>

        <!-- Output Section -->
        <div class="mt-8 bg-white rounded-lg shadow-lg border border-gray-200 p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">üì§ Content Output</h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">HTML Content:</label>
                    <textarea id="html-output" class="w-full h-32 p-3 border border-gray-300 rounded bg-gray-50 text-sm font-mono" readonly></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Text Content:</label>
                    <textarea id="text-output" class="w-full h-32 p-3 border border-gray-300 rounded bg-gray-50 text-sm" readonly></textarea>
                </div>
            </div>
            <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                <div class="p-3 bg-blue-50 rounded">
                    <div class="font-medium text-blue-800">Word Count</div>
                    <div id="word-count-display" class="text-blue-600 text-lg font-bold">0</div>
                </div>
                <div class="p-3 bg-green-50 rounded">
                    <div class="font-medium text-green-800">Character Count</div>
                    <div id="char-count-display" class="text-green-600 text-lg font-bold">0</div>
                </div>
                <div class="p-3 bg-purple-50 rounded">
                    <div class="font-medium text-purple-800">HTML Length</div>
                    <div id="html-length-display" class="text-purple-600 text-lg font-bold">0</div>
                </div>
                <div class="p-3 bg-orange-50 rounded">
                    <div class="font-medium text-orange-800">Validation</div>
                    <div id="validation-display" class="text-orange-600 text-lg font-bold">Valid</div>
                </div>
            </div>
        </div>

        <!-- Event Log -->
        <div class="mt-8 bg-white rounded-lg shadow-lg border border-gray-200 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-900">üìã Event Log</h3>
                <button id="clear-log" class="text-sm text-gray-500 hover:text-gray-700">Clear</button>
            </div>
            <div id="event-log" class="h-40 overflow-y-auto bg-gray-50 p-3 rounded text-sm font-mono"></div>
        </div>
    </div>

    <script src="../../dist/aionda-webui.js"></script>
    <script>
        // Event logging
        const eventLog = document.getElementById('event-log');
        function logEvent(message) {
            const timestamp = new Date().toLocaleTimeString();
            eventLog.innerHTML += `<div class="text-gray-600">[${timestamp}] ${message}</div>`;
            eventLog.scrollTop = eventLog.scrollHeight;
        }

        // Basic RichTextField
        const basicEditor = new AiondaWebUI.RichTextField({
            fieldLabel: 'Document Content',
            placeholder: 'Start typing your document here...',
            height: 250,
            value: '<p>Welcome to the <strong>RichTextField</strong> component!</p><p>Try formatting this text with the toolbar above.</p>'
        });

        basicEditor.on('change', (e) => {
            logEvent(`Basic editor content changed (${e.value.length} chars)`);
            updateOutputs();
        });

        basicEditor.on('focus', () => logEvent('Basic editor focused'));
        basicEditor.on('blur', () => logEvent('Basic editor blurred'));

        basicEditor.renderTo('#basic-richtext');

        // Form integration
        const formEditor = new AiondaWebUI.RichTextField({
            fieldLabel: 'Description *',
            required: true,
            height: 200,
            placeholder: 'Enter a description (required)...',
            validators: [
                (value, component) => {
                    const textLength = component.getTextContent().length;
                    if (textLength > 500) {
                        return 'Description must be less than 500 characters';
                    }
                    return true;
                }
            ]
        });

        formEditor.on('change', (e) => {
            logEvent(`Form editor content changed (${e.component.getTextContent().length} text chars)`);
            updateOutputs();
        });

        formEditor.renderTo('#form-richtext');

        // Custom toolbar
        const customEditor = new AiondaWebUI.RichTextField({
            fieldLabel: 'Custom Editor',
            height: 180,
            toolbar: ['bold', 'italic', 'underline', 'separator', 'foreColor', 'separator', 'createLink', 'unlink'],
            placeholder: 'Simple editor with custom toolbar...'
        });

        customEditor.on('change', () => {
            logEvent('Custom editor content changed');
            updateOutputs();
        });

        customEditor.renderTo('#custom-richtext');

        // Compact editor
        const compactEditor = new AiondaWebUI.RichTextField({
            fieldLabel: 'Quick Note',
            height: 120,
            toolbar: ['bold', 'italic', 'separator', 'foreColor'],
            placeholder: 'Quick note...'
        });

        compactEditor.on('change', () => {
            logEvent('Compact editor content changed');
            updateOutputs();
        });

        compactEditor.renderTo('#compact-richtext');

        // Button handlers
        document.getElementById('get-content').addEventListener('click', () => {
            const content = basicEditor.getValue();
            AiondaWebUI.Toast.info(`Content retrieved (${content.length} chars)`, { duration: 3000 });
            logEvent(`Retrieved content: ${content.substring(0, 50)}...`);
        });

        document.getElementById('set-content').addEventListener('click', () => {
            const sampleContent = `
                <h3>Sample Document</h3>
                <p>This is a <strong>sample document</strong> with various formatting:</p>
                <ul>
                    <li><em>Italic text</em></li>
                    <li><u>Underlined text</u></li>
                    <li><span style="color: red;">Colored text</span></li>
                </ul>
                <p>You can edit this content using the toolbar above.</p>
            `;
            basicEditor.setValue(sampleContent);
            logEvent('Set sample content');
            AiondaWebUI.Toast.success('Sample content loaded!');
        });

        document.getElementById('clear-content').addEventListener('click', () => {
            basicEditor.clear();
            logEvent('Cleared basic editor');
            AiondaWebUI.Toast.info('Content cleared');
        });

        document.getElementById('validate-form').addEventListener('click', () => {
            const isValid = formEditor.validate();
            const message = isValid ? 'Form is valid!' : 'Form has validation errors';
            const toastType = isValid ? 'success' : 'error';
            AiondaWebUI.Toast[toastType](message);
            logEvent(`Form validation: ${isValid ? 'valid' : 'invalid'}`);
        });

        document.getElementById('submit-form').addEventListener('click', () => {
            if (formEditor.validate()) {
                const content = formEditor.getValue();
                AiondaWebUI.Toast.success('Form submitted successfully!');
                logEvent(`Form submitted with ${content.length} chars`);
            } else {
                AiondaWebUI.Toast.error('Please fix validation errors before submitting');
                logEvent('Form submission blocked due to validation errors');
            }
        });

        document.getElementById('insert-html').addEventListener('click', () => {
            const html = '<p><strong>Inserted:</strong> <span style="background-color: yellow;">Custom HTML content</span> üéâ</p>';
            customEditor.insertHtml(html);
            logEvent('Inserted custom HTML');
            AiondaWebUI.Toast.info('Custom HTML inserted');
        });

        document.getElementById('word-count').addEventListener('click', () => {
            const wordCount = customEditor.getWordCount();
            const charCount = customEditor.getCharacterCount();
            AiondaWebUI.Toast.info(`Words: ${wordCount}, Characters: ${charCount}`, { duration: 4000 });
            logEvent(`Word count: ${wordCount}, Character count: ${charCount}`);
        });

        let isDisabled = false;
        document.getElementById('toggle-disabled').addEventListener('click', () => {
            isDisabled = !isDisabled;
            compactEditor.setDisabled(isDisabled);
            document.getElementById('toggle-disabled').textContent = isDisabled ? 'Enable Editor' : 'Disable Editor';
            logEvent(`Compact editor ${isDisabled ? 'disabled' : 'enabled'}`);
            AiondaWebUI.Toast.info(`Editor ${isDisabled ? 'disabled' : 'enabled'}`);
        });

        document.getElementById('focus-editor').addEventListener('click', () => {
            compactEditor.focus();
            logEvent('Focused compact editor');
        });

        document.getElementById('clear-log').addEventListener('click', () => {
            eventLog.innerHTML = '';
        });

        // Update output displays
        function updateOutputs() {
            const htmlContent = basicEditor.getValue();
            const textContent = basicEditor.getTextContent();
            const wordCount = basicEditor.getWordCount();
            const charCount = basicEditor.getCharacterCount();
            const isValid = basicEditor.validate();

            document.getElementById('html-output').value = htmlContent;
            document.getElementById('text-output').value = textContent;
            document.getElementById('word-count-display').textContent = wordCount;
            document.getElementById('char-count-display').textContent = charCount;
            document.getElementById('html-length-display').textContent = htmlContent.length;
            document.getElementById('validation-display').textContent = isValid ? 'Valid' : 'Invalid';
            document.getElementById('validation-display').className = isValid ? 'text-green-600 text-lg font-bold' : 'text-red-600 text-lg font-bold';
        }

        // Initial output update
        updateOutputs();

        logEvent('RichTextField demo initialized');
    </script>
</body>
</html>